"use strict";(self.webpackChunkAngularAppV2=self.webpackChunkAngularAppV2||[]).push([[499],{60499:(R,M,n)=>{n.r(M),n.d(M,{ProfileModule:()=>s});var g=n(88692),P=n(83344),F=n(38023),v=n(84945),C=n(13528),O=n(98168),T=n(44551),d=n(55783),S=n(40502),b=n(78985),u=n(12425),a=n(92340),e=n(64537),I=n(52522),V=n(39114),A=n(32161),w=n(37106),N=n(87109),U=n(22971),Z=n(8522),B=n(7363),D=n(54910);function L(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"mat-card",3),e.NdJ("click",function(m){const p=e.CHM(i).$implicit;return e.KtG(p.click(m))}),e.TgZ(1,"h2"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"h3"),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&t){const i=o.$implicit,f=e.oxw(2);e.Tol(f.classPrefix("Pod0Item0")),e.xp6(2),e.Oqu(e.lcZ(3,4,i.title)),e.xp6(3),e.Oqu(e.lcZ(6,6,i.subTitle))}}function Y(t,o){if(1&t&&(e.TgZ(0,"section"),e.YNc(1,L,7,8,"mat-card",4),e.qZA()),2&t){const i=e.oxw();e.Tol(i.classPrefix("Pod0")),e.xp6(1),e.Q6J("ngForOf",i.profileOptions)}}class c{constructor(o,i,f,m,y,p,j,k,G,H){this.cdref=o,this.route=i,this.router=f,this.utilService=m,this.configService=y,this.baseService=p,this.accountService=j,this.wmlNotifyService=k,this.navService=G,this.formsService=H,this.classPrefix=this.utilService.generateClassPrefix("ProfileMain"),this.myClass=this.classPrefix("View"),this.ngUnsub=new F.x,this.avatarImg=new d.gA({src:"assets/media/shared/avatar_img.png",alt:"profileMain.avatarImgAlt"}),this.profileInfo=this.accountService.currentProfile,this.profileOptions=S.hs.hX.map((r,h)=>new J({title:`profileMain.profileOptions.${h}.title`,subTitle:"profileMain.profileOptions."+h+".subTitle"})),this.basicDemographicsFormFields=["firstNameFieldFormControlName","lastNameFieldFormControlName","countryFieldFormControlName"].map((r,h)=>{let x=(0,this.baseService.generateInputFormField)("profileMain.basicDemographic.fields."+a.V.profileMain[r]+".label",a.V.profileMain[r],this.formsService.profileMainFormGroup,null,"standalone");return x.deleteLabelPart([0,0]),x}),this.basicDemographicsWmlForm=new b.n7({fields:this.basicDemographicsFormFields,fieldSections:[2,1]}),this.updateDemographics=()=>(this.baseService.openOverlayLoading(),this.accountService.updateProfile(this.formsService.profileMainFormGroup.value).pipe((0,C.R)(this.ngUnsub),(0,O.b)({next:()=>{let r=this.baseService.generateWMLNote("profileMain.wmlNotify.updateProfileSuccess",u.J1.Success);this.wmlNotifyService.create(r)},error:()=>{let r=this.baseService.generateWMLNote("profileMain.wmlNotify.updateProfileFail",u.J1.Error);this.wmlNotifyService.create(r)}}),this.baseService.closeOverlayLoading)),this.basicDemographicsUpdateBtn=new d.r5({value:"profileMain.basicDemographic.updateBtn",click:()=>{this.updateDemographics().subscribe()}}),this.checkForProfileInfo=()=>{this.pullUserAccountInfo().subscribe()},this.checkForProfileInfoOld=()=>{this.utilService.getQueryParamByName("access_token")??this.accountService.currentProfile.accessToken?this.pullUserAccountInfo().subscribe():this.navService.logOut()},this.pullUserAccountInfo=()=>this.accountService.retrieveUserAccountInfoFromQueryParams().pipe((0,C.R)(this.ngUnsub),(0,T.b)(()=>""===this.profileInfo.firstName?(this.accountService.retireveUserAccountInfoFromLocalStorage(),""===this.profileInfo.firstName?this.accountService.getNewAzureAccessToken():(0,v.of)([])):(0,v.of)([])),(0,O.b)(()=>{this.formsService.profileMainFormGroup.patchValue({[a.V.profileMain.firstNameFieldFormControlName]:this.profileInfo.firstName,[a.V.profileMain.lastNameFieldFormControlName]:this.profileInfo.lastName,[a.V.profileMain.countryFieldFormControlName]:this.profileInfo.country}),this.removeAllQueryParams()}))}removeAllQueryParams(){let o=this.router.createUrlTree([],{queryParams:{user_id:null,user_name:null,first_name:null,last_name:null,country:null,access_token:null},queryParamsHandling:"merge",preserveFragment:!0});this.router.navigateByUrl(o)}ngAfterViewInit(){this.checkForProfileInfo()}ngOnDestroy(){this.ngUnsub.next(),this.ngUnsub.complete()}}c.\u0275fac=function(o){return new(o||c)(e.Y36(e.sBO),e.Y36(P.gz),e.Y36(P.F0),e.Y36(I.t),e.Y36(V.E),e.Y36(A.b),e.Y36(w.B),e.Y36(u.eB),e.Y36(N.t),e.Y36(U.s))},c.\u0275cmp=e.Xpm({type:c,selectors:[["profile-main"]],hostVars:2,hostBindings:function(o,i){2&o&&e.Tol(i.myClass)},decls:17,vars:27,consts:[[3,"class",4,"ngIf"],[3,"src","alt"],[3,"params"],[3,"click"],[3,"class","click",4,"ngFor","ngForOf"]],template:function(o,i){1&o&&(e.TgZ(0,"div"),e.YNc(1,Y,2,3,"section",0),e.TgZ(2,"section")(3,"mat-card"),e._UZ(4,"img",1),e.TgZ(5,"h2"),e._uU(6),e.qZA()(),e.TgZ(7,"mat-card")(8,"h2"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"wml-form",2),e.TgZ(12,"div")(13,"button",3),e.NdJ("click",function(m){return i.basicDemographicsUpdateBtn.click(m)}),e.TgZ(14,"label"),e._uU(15),e.ALo(16,"translate"),e.qZA()()()()()()),2&o&&(e.Tol(i.classPrefix("MainPod")),e.xp6(1),e.Q6J("ngIf",!1),e.xp6(1),e.Tol(i.classPrefix("Pod1")),e.xp6(1),e.Tol(i.classPrefix("Pod1Item0")),e.xp6(1),e.Tol(i.classPrefix("Pod1Img0")),e.Q6J("src",i.avatarImg.src,e.LSH)("alt",i.avatarImg.alt),e.xp6(2),e.Oqu(i.profileInfo.userName),e.xp6(1),e.Tol(i.classPrefix("Pod1Item1")),e.xp6(1),e.Tol(i.classPrefix("Pod1Text0")),e.xp6(1),e.Oqu(e.lcZ(10,23,"profileMain.basicDemographic.title")),e.xp6(2),e.Q6J("params",i.basicDemographicsWmlForm),e.xp6(1),e.Tol(i.classPrefix("Pod1Item2")),e.xp6(1),e.Tol(i.classPrefix("Pod1Btn0")),e.xp6(2),e.Oqu(e.lcZ(16,25,i.basicDemographicsUpdateBtn.value)))},dependencies:[g.sg,g.O5,Z.S$,B.H6,D.X$],styles:[".ProfileMainView[_nghost-%COMP%]{display:block}.ProfileMainView[_nghost-%COMP%]   .ProfileMainMainPod[_ngcontent-%COMP%]{display:flex;margin:auto;justify-content:space-evenly;padding:4.5rem 0 0;padding:4.5rem 0;background:rgb(18,18,18)}.ProfileMainView[_nghost-%COMP%]   .ProfileMainMainPod[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{background:linear-gradient(black 0%,rgb(128,128,128) 120.2%)}.ProfileMainView[_nghost-%COMP%]   .ProfileMainMainPod[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#f8f9fa}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod0[_ngcontent-%COMP%]{padding:0 1.5rem}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod1[_ngcontent-%COMP%]{padding:0 1.5rem}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod0[_ngcontent-%COMP%]{flex:0 0 40%;display:flex;flex-direction:column;align-items:center}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod0Item0[_ngcontent-%COMP%]{width:100%;margin:0 0 1.5rem}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod1[_ngcontent-%COMP%]{flex:0 0 60%}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod1Btn0[_ngcontent-%COMP%]{padding:.5rem 1.5rem;border-radius:1.5rem;background:radial-gradient(farthest-corner at 100% 0px,navy 0%,blue 200%);align-self:flex-end}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod1Btn0[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#f8f9fa;font-size:3rem}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod1Btn0[_ngcontent-%COMP%]:hover{background:radial-gradient(farthest-corner at 100% 0px,#EF0107 0%,cyan 200%)}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod1Btn0[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.5rem}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod1Text0[_ngcontent-%COMP%]{text-align:center}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod1Item0[_ngcontent-%COMP%]{margin:0 0 1.5rem;display:flex;align-items:center}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod1Item1[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;padding:1rem 4rem}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod1Item1[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{flex:0 0 100%}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod1Item2[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.ProfileMainView[_nghost-%COMP%]   .ProfileMainPod1Img0[_ngcontent-%COMP%]{width:6rem;height:auto;margin:0 1rem 0 0}"],changeDetection:0});class J extends d.OL{constructor(o={}){super(),Object.assign(this,{...o})}}const Q=[{path:"",component:c}];class l{}l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[P.Bz.forChild(Q),P.Bz]});var z=n(16721);class s{}s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[g.ez,l,z.m]})}}]);